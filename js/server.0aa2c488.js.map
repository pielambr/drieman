{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.values.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/Server.vue?a33f","webpack:///src/views/Server.vue","webpack:///./src/views/Server.vue?0439","webpack:///./src/views/Server.vue?a179","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/views/Server.vue?8f28"],"names":["$","$values","values","target","stat","O","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","peer","_id","attrs","diceOutcome","playerNames","currentPlayer","diceRolling","on","onRoll","onNextPlayer","staticRenderFns","data","id","players","computed","Object","keys","methods","nextPlayer","idx","send","type","onPlayerJoin","includes","name","$set","connection","onPlayerLeave","$delete","window","setTimeout","created","localStorage","getItem","conn","console","components","Action","Dice","PlayerList","Ready","component","proto","forced","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","key","i","result","call","push","entries","$find","find","addToUnscopables","FIND","SKIPS_HOLES","Array","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES"],"mappings":"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","file":"js/server.0aa2c488.js","sourcesContent":["var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.github.io/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"server-root\"},[_c('div',{staticClass:\"column is-four-fifths\"},[_c('h1',[_vm._v(\"Kopieer en deel code: \"),_c('b',[_vm._v(_vm._s(_vm.peer._id))])]),_c('Action',{attrs:{\"outcome\":_vm.diceOutcome,\"players\":_vm.playerNames,\"currentPlayer\":_vm.currentPlayer}}),_c('Dice',{attrs:{\"outcome\":_vm.diceOutcome,\"rolling\":_vm.diceRolling,\"currentPlayer\":_vm.currentPlayer},on:{\"roll\":_vm.onRoll}}),_c('Ready',{attrs:{\"currentPlayer\":_vm.currentPlayer,\"outcome\":_vm.diceOutcome},on:{\"click\":_vm.onNextPlayer}})],1),_c('div',{staticClass:\"column\"},[_c('PlayerList',{attrs:{\"players\":_vm.playerNames,\"currentPlayer\":_vm.currentPlayer}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"server-root\">\n    <div class=\"column is-four-fifths\">\n      <h1>Kopieer en deel code: <b>{{peer._id}}</b></h1>\n      <Action\n        :outcome=\"diceOutcome\"\n        :players=\"playerNames\"\n        :currentPlayer=\"currentPlayer\"\n      />\n      <Dice\n        :outcome=\"diceOutcome\"\n        :rolling=\"diceRolling\"\n        :currentPlayer=\"currentPlayer\"\n        @roll=\"onRoll\" />\n      <Ready\n        :currentPlayer=\"currentPlayer\"\n        :outcome=\"diceOutcome\"\n        @click=\"onNextPlayer\"\n      />\n    </div>\n    <div class=\"column\">\n      <PlayerList\n        :players=\"playerNames\"\n        :currentPlayer=\"currentPlayer\"\n      />\n    </div>\n  </div>\n</template>\n<style>\n.server-root {\n  display: flex;\n  width: 100%;\n  margin-top: 0;\n  height: 100%;\n}\n</style>\n<script>\nimport Peer from 'peerjs';\nimport Action from '@/components/Action.vue';\nimport Dice from '@/components/Dice.vue';\nimport PlayerList from '@/components/PlayerList.vue';\nimport Ready from '@/components/Ready.vue';\n\nexport default {\n  data() {\n    return {\n      id: '',\n      peer: {},\n      diceRolling: false,\n      diceOutcome: [],\n      players: {},\n      currentPlayer: null,\n    };\n  },\n  computed: {\n    playerNames() {\n      return Object.keys(this.players);\n    },\n  },\n  methods: {\n    nextPlayer() {\n      const idx = this.playerNames.indexOf(this.currentPlayer);\n      if (idx === this.playerNames.length - 1) return this.playerNames[0];\n      return this.playerNames[idx + 1];\n    },\n    onNextPlayer() {\n      const nextPlayer = this.nextPlayer();\n      this.currentPlayer = nextPlayer;\n      this.diceOutcome = [];\n      this.send({\n        type: 'DATA_SYNC',\n        diceOutcome: this.diceOutcome,\n        diceRolling: this.diceRolling,\n        players: this.playerNames,\n        currentPlayer: this.currentPlayer,\n      });\n    },\n    onPlayerJoin(connection, data) {\n      if (!Object.keys(this.players).includes(data.name)) {\n        this.$set(this.players, data.name, connection);\n        this.send({ type: 'PLAYER_JOINED', name: data.name });\n      }\n    },\n    onPlayerLeave(connection) {\n      const name = this.playerNames.find((n) => {\n        if (!this.players[n]) return false;\n        return this.players[n].peer === connection.peer;\n      });\n      this.$delete(this.players, name);\n      this.send({ type: 'PLAYER_LEFT', name });\n    },\n    onRoll() {\n      this.diceRolling = true;\n      this.diceOutcome = [];\n      this.send({ type: 'DICE_ROLL_START', outcome: this.diceOutcome, name: this.currentPlayer });\n      window.setTimeout(() => {\n        this.diceOutcome = [Math.ceil(Math.random() * 6), Math.ceil(Math.random() * 6)];\n        this.diceRolling = false;\n        this.send({ type: 'DICE_ROLL_END', outcome: this.diceOutcome, name: this.currentPlayer });\n      }, 2500);\n    },\n    send(data) {\n      Object.values(this.players).forEach((connection) => {\n        if (connection) connection.send(data);\n      });\n    },\n  },\n  created() {\n    this.$set(this.players, window.localStorage.getItem('name'), null);\n    this.currentPlayer = window.localStorage.getItem('name');\n    this.peer = new Peer(null, { debug: 3 });\n    this.peer.on('open', (id) => {\n      this.id = id;\n    });\n    this.peer.on('connection', (conn) => {\n      conn.on('data', (data) => {\n        if (data.type === 'PLAYER_JOIN') this.onPlayerJoin(conn, data);\n        if (data.type === 'DICE_ROLL') this.onRoll();\n        if (data.type === 'NEXT_PLAYER') this.onNextPlayer();\n        conn.send({\n          type: 'DATA_SYNC',\n          diceOutcome: this.diceOutcome,\n          diceRolling: this.diceRolling,\n          players: this.playerNames,\n          currentPlayer: this.currentPlayer,\n        });\n      });\n      conn.on('open', () => {\n        conn.send('hello!');\n      });\n      conn.on('close', () => {\n        this.onPlayerLeave(conn);\n      });\n    });\n    this.peer.on('error', console.error); // eslint-disable-line\n  },\n  components: {\n    Action,\n    Dice,\n    PlayerList,\n    Ready,\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Server.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Server.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Server.vue?vue&type=template&id=18a6aad1&\"\nimport script from \"./Server.vue?vue&type=script&lang=js&\"\nexport * from \"./Server.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Server.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Server.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Server.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}