(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["server"],{"07ac":function(e,t,r){var n=r("23e7"),a=r("6f53").values;n({target:"Object",stat:!0},{values:function(e){return a(e)}})},"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),c=r("17c2"),i=r("9112");for(var o in a){var s=n[o],l=s&&s.prototype;if(l&&l.forEach!==c)try{i(l,"forEach",c)}catch(u){l.forEach=c}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),c=r("ae40"),i=a("forEach"),o=c("forEach");e.exports=i&&o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1d74":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"server-root"},[r("div",{staticClass:"column is-four-fifths"},[r("h1",[e._v("Kopieer en deel code: "),r("b",[e._v(e._s(e.peer._id))])]),r("Action",{attrs:{outcome:e.diceOutcome,players:e.playerNames,currentPlayer:e.currentPlayer}}),r("Dice",{attrs:{outcome:e.diceOutcome,rolling:e.diceRolling,currentPlayer:e.currentPlayer},on:{roll:e.onRoll}}),r("Ready",{attrs:{currentPlayer:e.currentPlayer,outcome:e.diceOutcome},on:{click:e.onNextPlayer}})],1),r("div",{staticClass:"column"},[r("PlayerList",{attrs:{players:e.playerNames,currentPlayer:e.currentPlayer}})],1)])},a=[],c=(r("7db0"),r("4160"),r("caad"),r("c975"),r("b0c0"),r("b64b"),r("07ac"),r("2532"),r("159b"),r("a0bc")),i=r.n(c),o=r("b490"),s=r("67c2"),l=r("3645"),u=r("8c87"),d={data:function(){return{id:"",peer:{},diceRolling:!1,diceOutcome:[],players:{},currentPlayer:null}},computed:{playerNames:function(){return Object.keys(this.players)}},methods:{nextPlayer:function(){var e=this.playerNames.indexOf(this.currentPlayer);return e===this.playerNames.length-1?this.playerNames[0]:this.playerNames[e+1]},onNextPlayer:function(){var e=this.nextPlayer();this.currentPlayer=e,this.diceOutcome=[],this.send({type:"DATA_SYNC",diceOutcome:this.diceOutcome,diceRolling:this.diceRolling,players:this.playerNames,currentPlayer:this.currentPlayer})},onPlayerJoin:function(e,t){Object.keys(this.players).includes(t.name)||(this.$set(this.players,t.name,e),this.send({type:"PLAYER_JOINED",name:t.name}))},onPlayerLeave:function(e){var t=this,r=this.playerNames.find((function(r){return!!t.players[r]&&t.players[r].peer===e.peer}));this.$delete(this.players,r),this.send({type:"PLAYER_LEFT",name:r})},onRoll:function(){var e=this;this.diceRolling=!0,this.diceOutcome=[],this.send({type:"DICE_ROLL_START",outcome:this.diceOutcome,name:this.currentPlayer}),window.setTimeout((function(){e.diceOutcome=[Math.ceil(6*Math.random()),Math.ceil(6*Math.random())],e.diceRolling=!1,e.send({type:"DICE_ROLL_END",outcome:e.diceOutcome,name:e.currentPlayer})}),2500)},send:function(e){Object.values(this.players).forEach((function(t){t&&t.send(e)}))}},created:function(){var e=this;this.$set(this.players,window.localStorage.getItem("name"),null),this.currentPlayer=window.localStorage.getItem("name"),this.peer=new i.a(null,{debug:3}),this.peer.on("open",(function(t){e.id=t})),this.peer.on("connection",(function(t){t.on("data",(function(r){"PLAYER_JOIN"===r.type&&e.onPlayerJoin(t,r),"DICE_ROLL"===r.type&&e.onRoll(),"NEXT_PLAYER"===r.type&&e.onNextPlayer(),t.send({type:"DATA_SYNC",diceOutcome:e.diceOutcome,diceRolling:e.diceRolling,players:e.playerNames,currentPlayer:e.currentPlayer})})),t.on("open",(function(){t.send("hello!")})),t.on("close",(function(){e.onPlayerLeave(t)}))})),this.peer.on("error",console.error)},components:{Action:o["a"],Dice:s["a"],PlayerList:l["a"],Ready:u["a"]}},y=d,f=(r("c631"),r("2877")),h=Object(f["a"])(y,n,a,!1,null,null,null);t["default"]=h.exports},4160:function(e,t,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"6f53":function(e,t,r){var n=r("83ab"),a=r("df75"),c=r("fc6a"),i=r("d1e7").f,o=function(e){return function(t){var r,o=c(t),s=a(o),l=s.length,u=0,d=[];while(l>u)r=s[u++],n&&!i.call(o,r)||d.push(e?[r,o[r]]:o[r]);return d}};e.exports={entries:o(!0),values:o(!1)}},"7db0":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").find,c=r("44d2"),i=r("ae40"),o="find",s=!0,l=i(o);o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),c(o)},9588:function(e,t,r){},b64b:function(e,t,r){var n=r("23e7"),a=r("7b0b"),c=r("df75"),i=r("d039"),o=i((function(){c(1)}));n({target:"Object",stat:!0,forced:o},{keys:function(e){return c(a(e))}})},c631:function(e,t,r){"use strict";var n=r("9588"),a=r.n(n);a.a}}]);
//# sourceMappingURL=server.0aa2c488.js.map